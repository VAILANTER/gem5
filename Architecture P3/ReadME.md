## ΑΡΧΙΤΕΚΤΟΝΙΚΗ 2η ΕΡΓΑΣΙΑ  
#### ΤΣΟΥΡΑΚΑΣ ΔΗΜΗΤΡΗΣ 9042  
#### ΑΘΑΝΑΣΙΑΔΗΣ ΧΡΗΣΤΟΣ 9092  

### Βήμα 1ο  
1. **Dynamic Power** (ή δυναμική ισχύ) είναι η ισχύ που απορροφούν τα κυκλώματα όταν φορτίζουν και εκφορτίζουν τα χωρητικά φορτία στις αλλαγές καταστάσεων, δηλαδή είναι η ισχύς που χρησιμοποιείται όταν το προϊόν εκτελεί τις διάφορες λειτουργίες του. Η δυναμική ισχύς είναι ανάλογη της συνολικής χωρητικότητας φορτίου, της τάσης τροφοδοσίας, της μεταβολής της τάσης κατά τη διάρκεια της εναλλαγής των καταστάσεων, της συχνότητας ρολογιού και του συντελεστή δραστηριότητας και υπολογίζεται απο τον τύπο **Pdynamic = α * C * VDD^2 * f**.  

**Leakage Power** (ή ισχύ διαρροής) είναι η ισχύ που καταναλώνεται από το τρανζίστορ σε κατάσταση εκτός λειτουργίας λόγω του αντιστρεπτικού ρεύματος, δηλαδή η ισχύς που καταναλώνεται από ακούσια διαρροή που δεν συμβάλλει στη λειτουργία ολοκληρωμένου κυκλώματος. Όταν τα τρανζίστορ βρίσκονται σε κατάσταση εκτός λειτουργίας, στην ιδανική περίπτωση δεν πρέπει να αντλούν ρεύμα. Αυτό δεν συμβαίνει στην πραγματικότητα: Υπάρχει κάποια ποσότητα ρεύματος που τραβιέται ακόμα και στην κατάσταση off λόγω του αντιστρεπτικού ρεύματος στην πηγή και των διαχύσεων διοχεύτεσης, καθώς και του ρεύματος υποκατωφλιού που οφείλεται στο φορτίο αναστροφής που υπάρχει στις τάσεις πύλης κάτω από την τάση κατωφλίου . Όλα αυτά συλλογικά αναφέρονται ως ρεύμα διαρροής. Αυτό το ρεύμα είναι πολύ μικρό για ένα μόνο τρανζίστορ. Εντούτοις, μέσα σε ένα ολοκληρωμένο κύκλωμα υπάρχουν εκατομμύρια έως δισεκατομμύρια τρανζίστορ, έτσι αυτό το ρεύμα γίνεται σημαντικό στο επίπεδο του ολοκληρωμένου κυκλώματος. Η ισχύς που διαχέεται λόγω αυτού του ρεύματος ονομάζεται δύναμη διαρροής, οφείλεται στο ρεύμα διαρροής και εξαρτάται κυρίως από τη διαδικασία κατασκευής και την τεχνολογία με την οποία κατασκευάζονται τα τρανζίστορ. Δεν εξαρτάται από τη συχνότητα λειτουργίας των flip-flops.  

Καθώς η ισχύς διαρρόης είναι σταθερή και εξαρτάται από το ολοκληρωμένο κύκλωμα, εάν τρέξουμε διαφορετικά προγράμματα θα επηρεαστεί μόνο η δυναμική ισχύς. Από τον τύπο που την υπολογίζει βλέπουμε ότι είναι ανάλογη της συχνότητας ρολογιού, επομένως όσο μεγαλύτερη συχνότητα απαταιτεί ένα πρόγραμμα, τόσο μεγαλυτερη η δυναμική ισχύ του. Τέλος, η διάρκεια εκτέλεσης δεν επηρεάζει την τελική μας ισχύ.  
(Πληροφορίες από [hpl.hp](https://www.hpl.hp.com/research/mcpat/micro09.pdf))
(Πληροφορίες από [sciencedirect](https://www.sciencedirect.com/topics/computer-science/static-power))

2. Υπάρχει περίπτωση ο επεξεργαστής των 40 Watt να δίνει μεγαλύτερη διάρκεια μπαταρίας στο σύστημα. Κάτι τέτοιο είναι εφικτό εάν γίνει χρήση του λεγόμενου dynamic voltage frequency scaling (DVFS) όπου η ίδια λειτουργία ολοκληρώνεται με κατανάλωση λιγότερης ενέργειας μειώνοντας την τάση ή την συχνότητα. Στον McPAT, παρόλα αυτά, δεν μπορούμε να πάρουμε την σχετική απάντηση καθώς δεν μας προσφέρει αναλυτικά στατιστικά για το Dynamic Power παρά μόνο τις peak τιμές τους. Έτσι δεν μπορούμε να κρίνουμε ποιος επεξεργαστής δίνει μεγαλύτερη διάρκεια μπαταρίας στο σύστημα.  

3. Τρέχοντας τους δύο επεξεργαστές παίρνουμε από τον McPAT 1.74189 W Peak Power για τον ARM_A9 και 134.938 W Peak Power για τον Xeon (Pxeon = 77.6 Parm_a9). Επίσης έχουμε ότι ο Xeon είναι 40 φορές πιο γρήγορος απο τον ARM_A9 ( ΤαχύτηταXeon = 40 ΤαχύτηταARM_A9 ). Παρατηρούμε ότι το κλάσμα (Ταχύτητα) / (Ισχύ) είναι μεγαλύτερο στον ARM_A9 δηλαδή ο ARM_A9 είναι πιο αποδοτικός ενεργειακά από τον Xeon. Ο λόγος που έγινε η σύγκριση των Peak Power και όχι των Dynamic μόνο είναι διότι θεωρούμε ότι δεν διακόπτεται η λειτουργία του συστήματος, επομένως πρέπει να συμπεριλάβουμε και το Leakage Power.  

### Βήμα 2ο  
1. Το **Propagation delay**, που συμβολίζεται με το Tpd, είναι ο χρόνος που απαιτείται για τη μεταφορά ενός ψηφιακού σήματος από τις εισόδους μιας λογικής πύλης στην έξοδο. Μετρώνται σε μικροδευτερόλεπτα (μs), νανοδευτερόλεπτα (ns) ή picoseconds (ps), όπου 1 μs = 10-6 s, 1 ns = 10-9 s και 1 ps = 10-12 s. Το Propagation delay για μια λογική πύλη ολοκληρωμένου κυκλώματος μπορεί να διαφέρει για κάθε μία από τις εισόδους. Αν όλοι οι άλλοι παράγοντες διατηρούνται σταθεροί, η μέση καθυστέρηση μετάδοσης σε μια λογική πύλη ολοκληρωμένου κυκλώματος αυξάνεται καθώς η πολυπλοκότητα του εσωτερικού κυκλώματος αυξάνεται. Ορισμένες τεχνολογίες ολοκληρωμένων κυκλωμάτων έχουν διαρκώς μεγαλύτερες τιμές Tpd από άλλες και θεωρούνται "πιο αργές". Η καθυστέρηση της διάδοσης είναι σημαντική επειδή έχει άμεση επίδραση στην ταχύτητα με την οποία μπορεί να λειτουργήσει μια ψηφιακή συσκευή, όπως ένας υπολογιστής. Αυτό ισχύει για τσιπάκια μνήμης καθώς και μικροεπεξεργαστές. Τις πληροφορίες για το Propagation delay δεν μπορούμε να τις αντλήσουμε από τον McPAT καθώς αυτός μας δίνει πληροφορίες για την ενέργεια κατανάλωσης του συστήματος. Ο Gem5 από την άλλη, μπορεί να μας δώσει αυτές τις πληροφορίες. (Πληροφορίες από [searchnetworking.techtarget](https://searchnetworking.techtarget.com/definition/propagation-delay))  
Για να υπολογίσουμε την ενέργεια αρκεί να εφαρμόσουμε τον τύπο **Energy = Power * Delay** 
Για το γινόμενο Power-Delay (PDP) ισχύει **PDP = Pavg * Tpd**  
Για το γινόμενο Energy-Delay (EDP) ισχύει **EDP = PDP * Tpd**  
Για το γινόμενο Energy-Area-Delay (EDAP) θα ισχύει **EDAP = EDP * Area** 
(Πληροφορίες από [eecs.harvard](http://www.eecs.harvard.edu/~dbrooks/cs246/cs246-lecture2.pdf))

2. **Specbzip2**:
Στον Core έχουμε επηρροή από την αλλαγή της cacheline αλλά και του μεγέθους της L1. Με αύξηση των δύο τελευταίων παρατηρούμε αύξηση του Core Area, των Leakage και του Runtime Dynamic, με μεγαλύτερη την cacheline να επηρεάζει σε μεγαλύτερο βαθμό. Αλλαγές στα associativity δεν φαίνονται να επηρεάζουν αισθητά τα αποτελέσματά μας. Στην L2 έχουμε επηρροή από την αλλαγή της cacheline αλλά και του μεγέθους της L2, όπου με αύξηση έχουμε και αύξηση και των αποτελεσμάτων για το Area και το Power. Πάλι η cacheline έχει μεγαλύτερη βαρύτητα απο το μέγεθος της L2. Αλλαγές στα associativity δεν φαινεται να επηρεάζουν αισθητά το Area και το Power της L2. 

**Specmcf**:
Και σε αυτό το benchmark βλέπουμε παρόμοια αποτελέσματα. Στον Core έχουμε επηρροή από την αλλαγή της cacheline αλλά και του μεγέθους της L1. Με αύξηση των δύο τελευταίων παρατηρούμε αύξηση του Core Area, των Leakage και του Runtime Dynamic. Αλλαγές στα associativity δεν φαίνονται να επηρεάζουν αισθητά τα αποτελέσματά μας. Στην L2 έχουμε επηρροή από την αλλαγή της cacheline αλλά και του μεγέθους της L2, όπου με αύξηση έχουμε και αύξηση και των αποτελεσμάτων για το Area και το Power. Αλλαγές στα associativity δεν φαινεται να επηρεάζουν αισθητά το Area και το Power της L2. 

**Spechmmer**:
Στο συγκεκριμένο benchmark, η αλλαγή της cacheline επηρεάζει περισσότερο από κάθε άλλη αλλαγή το Core αλλά και την L2. Όλες οι τιμές αυξάνονται με αύξησή της. Αλλαγές στο μέγεθος της L2 επηρεάζουν μόνο τα Power και Area της L2 ενώ στο μέγεθος της L1 επηρεάζουν κυρίως τα Power και Area του Core αλλά ελάχιστα και της L2. Αλλαγές στα associativity δεν επιφέρουν διαφορές παρά μόνο ελάχιστες αυξομειώσεις του Runtime Dynamic.

**Specsjeng**:
Στο συγκεκριμένο benchmark, αύξηση στην cacheline είναι αυτή που αυξάνει τα Area και Power κατά κύριο λόγο. Αύξηση του μεγέθους της L2 αυξάνει αναλογικά το Area της L2 και μεταβολή της L1 δεν φαίνεται να επηρεάζει σημαντικά το Core. Ακόμη, αλλαηγές στα associativity δεν μεταβάλουν τα αποτελέσματά μας.   

**Speclbm**:
Και σε αυτό το benchmark μεταβολή στην cacheline φαίνεται να είναι παράγοντας με μεγάλη βαρύτητα, καθώς τα Area και των δύο, Core και L2, αυξάνονται πολύ. Επίσης έχουμε αύξηση και στα Power και των δύο. Πολλαπλασιασμός του μεγέθους της L2, πολλαπλασιάζει το Area της ανάλογα και αυξάνει τα Leakage και το Runtime Dynamic. Όσον αφορά τα associativity δεν επηρεάζουν αισθητά το Area ούτε του Core ούτε της L2 και γενικά δεν έχουμε μεγάλη βαρύτητα σε αλλαγές.

3. Παρατηρούμε πως τα αποτελέσματα από τις δύο ασκήσεις συμβαδίζουν. Με αύξηση χαρακτηριστικών της cache αυξάνεται το κόστος στην συνάρτηση κόστους της πρώτης άσκησης και αυξάνεται, επίσης, το γινόμενο Energy-Area-Power (EDAP) καθώς αυξάνονται τα Core/L2 Area, Leakage και Runtime Dynamic. Καθώς η συνάρτηση κόστους περιλαμβάνει αυθαίρετους συντελεστές, η αξιολόγηση δεν μπορεί να είναι τελείως αξιόπιστη για συστήματα με πολύ μικρές διαφορές. Η αξιολόγηση των συστημάτων με τον McPAT είναι πιο αξιόπιστη καθώς έχουμε αναλυτικές τιμές για την κατανάλωση ενέργειας και του Area του κάθε συστήματος. Ακόμη, η αλλαγές της cacheline φαίνεται να έχουν μεγαλύτερο συντελεστή βαρύτητας σύμφωνα με τα αποτελέσματα του McPAT. Στην δεύτερη άσκηση προσπαθήσαμε να επιλέξουμε το σύστημα που με το λιγότερο κόστος μας δίνει το χαμηλότερο CPI. Με τελείως αντίστοιχο τρόπο επιλέγουμε το σύστημα με το μικρότερο CPI αλλά και ταυτόχρονα το μικρότερο EDAP.






